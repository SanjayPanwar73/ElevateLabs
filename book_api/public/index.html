
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸ“š Book Manager</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
  <div class="container py-5">
    <h1 class="mb-4 text-center">ðŸ“š Book Manager</h1>

    <!-- Add Book Form -->
    <form id="addBookForm" class="mb-4">
      <div class="row g-2">
        <div class="col-md-5">
          <input type="text" id="title" class="form-control" placeholder="Book Title" required />
        </div>
        <div class="col-md-5">
          <input type="text" id="author" class="form-control" placeholder="Author" required />
        </div>
        <div class="col-md-2">
          <button type="submit" class="btn btn-primary w-100">Add Book</button>
        </div>
      </div>
    </form>

    <!-- Book List -->
    <ul id="bookList" class="list-group"></ul>
  </div>

  <script>
    const bookList = document.getElementById('bookList');
    const form = document.getElementById('addBookForm');

    // Fetch and display books
    async function loadBooks() {
      const res = await fetch('/books');
      const books = await res.json();
      bookList.innerHTML = '';
      books.forEach(book => {
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';
        li.innerHTML = `
          <div>
            <strong>${book.title}</strong> by ${book.author}
          </div>
          <button class="btn btn-danger btn-sm" onclick="deleteBook(${book.id})">Delete</button>
        `;
        bookList.appendChild(li);
      });
    }

    // Add book
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const title = document.getElementById('title').value;
      const author = document.getElementById('author').value;

      await fetch('/books', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title, author })
      });

      form.reset();
      loadBooks();
    });

    // Delete book
    async function deleteBook(id) {
      await fetch(`/books/${id}`, { method: 'DELETE' });
      loadBooks();
    }

    // Initial load
    loadBooks();
  </script>
</body>
</html>
